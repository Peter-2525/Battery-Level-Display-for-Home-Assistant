# =======================================
# ðŸ“¦ LAYOUT CONTAINER FOR THE ENTIRE CARD
# =======================================
type: custom:layout-card  # ðŸ§± Uses layout-card to manage advanced layout types
layout_type: vertical     # ðŸ“ Arranges child cards in a vertical stack

cards:
  - type: horizontal-stack  # âž¡ï¸ Places child cards (iPhones) side-by-side in a row
    cards:

      # ======================================
      # ðŸ”‹ CARD 1: Battery Display for iPhone
      # ======================================
      - type: custom:button-card  # ðŸ–¼ï¸ Uses the powerful button-card for full customization
        entity: sensor.iphone_p_lemieux_battery_level  # ðŸ“¡ Battery level sensor entity (replace if needed)
        name: ðŸ”‹ iPhone          # ðŸ·ï¸ Text label displayed at the top of the card
        show_state: true         # âœ… Show numeric battery percentage below the icon
        show_icon: false         # âŒ Hide the default icon (weâ€™re using a custom image instead)
        show_name: true          # âœ… Display the name at the top of the card

        # --------------------------------------
        # ðŸ§© Custom HTML field for battery image
        # --------------------------------------
        custom_fields:
          battery_img: |
            [[[
              const lvl = parseInt(entity.state);  // ðŸ”¢ Read battery level from the sensor (as integer)
              let img = '/local/battery/battery_0.png';  // ðŸ”‹ Default image for 0%

              // ðŸŸ  Conditional logic to switch battery image based on level
              if (lvl > 15) img = '/local/battery/battery_15.png';   // ðŸ”‹ Low
              if (lvl > 35) img = '/local/battery/battery_35.png';   // ðŸ”‹ Medium
              if (lvl > 75) img = '/local/battery/battery_75.png';   // ðŸ”‹ High
              if (lvl > 90) img = '/local/battery/battery_100.png';  // ðŸ”‹ Full

              // ðŸ“¸ Return HTML <img> with chosen image and height
              return `<img src="${img}" style="height: 200px;" />`;
            ]]]

        # ----------------------------------------
        # ðŸŽ¨ STYLING: Visual appearance of the card
        # ----------------------------------------
        styles:
          card:
            - height: 160px                         # â¬†ï¸ Total card height
            - background-color: "#2c3e50"           # ðŸŽ¨ Dark background
            - position: relative                    # ðŸ“Œ Allows absolute positioning inside
            - padding: 0                            # ðŸ§± Remove padding to make image fit tighter
            - border-radius: 20px                   # ðŸŸ£ Rounded corners
            - box-shadow: 0 4px 10px rgba(0, 0, 0, 0.6)  # ðŸ’¨ Soft drop shadow
            - color: white                          # âœï¸ Text color

          name:
            - position: absolute                    # ðŸ“ Position absolutely inside the card
            - top: 5%                               # ðŸ” Distance from the top
            - left: 50%                             # â¬…ï¸ Center horizontally
            - transform: translateX(-50%)           # ðŸŽ¯ Perfect centering trick
            - font-size: 20px                       # ðŸ”  Font size of the name
            - font-weight: 400                      # ðŸ…±ï¸ Normal font weight
            - text-shadow: 1px 1px 2px black        # ðŸŒ«ï¸ Slight glow for readability

          state:
            - position: absolute                    # ðŸ§· Position battery percentage text
            - bottom: 10%                           # ðŸ”» Distance from the bottom
            - left: 50%                             # â¬…ï¸ Center horizontally
            - transform: translateX(-50%)           # ðŸŽ¯ Centering
            - font-size: 18px                       # ðŸ”¡ Font size for battery %
            - font-weight: 400                      # ðŸ…±ï¸ Normal weight
            - text-shadow: 1px 1px 2px black        # âœ¨ Makes white text readable on dark background

          custom_fields:
            battery_img:
              - position: absolute                  # ðŸ–¼ï¸ Absolutely position image
              - top: 65%                            # â¬‡ï¸ Position image in the middle-lower area
              - left: 50%                           # âž¡ï¸ Center horizontally
              - transform: translate(-50%, -50%)    # ðŸ” True centering on both axes

      # ========================================
      # ðŸ“± CARD 2: Battery Display for iPhone #2
      # ========================================
      - type: custom:button-card
        entity: sensor.iphone_p_lemieux_battery_level  # âš ï¸ Same entity as card 1 â€” replace with iPhone#2 sensor!
        name: ðŸ“± Iphone#2
        show_state: true
        show_icon: false
        show_name: true

        custom_fields:
          battery_img: |
            [[[
              const lvl = parseInt(entity.state);
              let img = '/local/battery/battery_0.png';
              if (lvl > 15) img = '/local/battery/battery_15.png';
              if (lvl > 35) img = '/local/battery/battery_35.png';
              if (lvl > 75) img = '/local/battery/battery_75.png';
              if (lvl > 90) img = '/local/battery/battery_100.png';
              return `<img src="${img}" style="height: 200px;" />`;
            ]]]

        styles:
          card:
            - height: 160px
            - background-color: "#2c3e50"
            - position: relative
            - padding: 0
            - border-radius: 20px
            - box-shadow: 0 4px 10px rgba(0, 0, 0, 0.6)
            - color: white

          name:
            - position: absolute
            - top: 5%
            - left: 50%
            - transform: translateX(-50%)
            - font-size: 20px
            - font-weight: 400
            - text-shadow: 1px 1px 2px black

          state:
            - position: absolute
            - bottom: 10%
            - left: 50%
            - transform: translateX(-50%)
            - font-size: 18px
            - font-weight: 400
            - text-shadow: 1px 1px 2px black

          custom_fields:
            battery_img:
              - position: absolute
              - top: 65%
              - left: 50%
              - transform: translate(-50%, -50%)
