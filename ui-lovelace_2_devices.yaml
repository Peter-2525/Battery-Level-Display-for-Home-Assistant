# ======================================================
# üß± LAYOUT CONTAINER ‚Äî STACKING TWO IPHONE BATTERY CARDS
# ======================================================
type: custom:layout-card  # üì¶ Advanced layout manager
layout_type: vertical     # üîÉ Stack child cards vertically

cards:
  - type: horizontal-stack  # üìè Arrange child cards side by side in one row
    cards:

      # ====================================================
      # üîã CARD 1 ‚Äî BATTERY DISPLAY FOR IPHONE (Main Device)
      # ====================================================
      - type: custom:button-card  # üéõÔ∏è Fully custom button-card for battery visualization
        entity: sensor.iphone_p_lemieux_battery_level  # üîå iPhone battery level sensor
        name: üîã iPhone                                 # üè∑Ô∏è Display name with emoji icon
        show_state: true                               # ‚úÖ Show battery percentage (e.g., 76%)
        show_icon: false                               # ‚ùå Disable default icon
        show_name: true                                # ‚úÖ Enable custom name display

        # -----------------------------------------
        # üß© Dynamic field for the battery image
        # -----------------------------------------
        custom_fields:
          battery_img: |
            [[[
              const lvl = parseInt(entity.state);  // üî¢ Convert battery % to integer
              let img = '/local/battery/battery_0.png';  // üîã Default image (0%)

              // üìà Thresholds for selecting battery icon
              if (lvl > 5) img = '/local/battery/battery_5.png';
              if (lvl > 15) img = '/local/battery/battery_15.png';
              if (lvl > 35) img = '/local/battery/battery_35.png';
              if (lvl > 50) img = '/local/battery/battery_50.png';   // üÜï New 50%
              if (lvl > 75) img = '/local/battery/battery_75.png';
              if (lvl > 90) img = '/local/battery/battery_90.png';   // üÜï New 90%
              if (lvl >= 100) img = '/local/battery/battery_100.png';

              return `<img src="${img}" style="height: 200px;" />`;  // üñºÔ∏è Render image
            ]]]

        # ---------------------------------------
        # üé® Styling for layout, text, and image
        # ---------------------------------------
        styles:
          card:
            - height: 160px
            - background-color: "#2c3e50"  # üé® Dark card background
            - position: relative
            - padding: 0
            - border-radius: 20px          # üü¶ Rounded corners
            - box-shadow: 0 4px 10px rgba(0, 0, 0, 0.6)  # üí® Shadow effect
            - color: white
          name:
            - position: absolute
            - top: 5%
            - left: 50%
            - transform: translateX(-50%)  # üîÅ Center horizontally
            - font-size: 20px
            - font-weight: 400
            - text-shadow: 1px 1px 2px black
          state:
            - position: absolute
            - bottom: 10%
            - left: 50%
            - transform: translateX(-50%)  # üîÅ Center horizontally
            - font-size: 18px
            - font-weight: 400
            - text-shadow: 1px 1px 2px black
          custom_fields:
            battery_img:
              - position: absolute
              - top: 65%
              - left: 50%
              - transform: translate(-50%, -50%)  # üîÅ Center image both axes

      # =====================================================
      # üì± CARD 2 ‚Äî BATTERY DISPLAY FOR IPHONE (Secondary)
      # =====================================================
      - type: custom:button-card  # üéõÔ∏è Another button-card for second iPhone
        entity: sensor.iphone_p_lemieux_battery_level  # ‚ö†Ô∏è Use another sensor if available
        name: üì± iPhone#2                                # üè∑Ô∏è Distinct name with emoji
        show_state: true
        show_icon: false
        show_name: true

        # -----------------------------------------
        # üß© Dynamic field for the battery image
        # -----------------------------------------
        custom_fields:
          battery_img: |
            [[[
              const lvl = parseInt(entity.state);  // üî¢ Convert battery % to integer
              let img = '/local/battery/battery_0.png';

              // üìà Thresholds for battery icons
              if (lvl > 5) img = '/local/battery/battery_5.png';
              if (lvl > 15) img = '/local/battery/battery_15.png';
              if (lvl > 35) img = '/local/battery/battery_35.png';
              if (lvl > 50) img = '/local/battery/battery_50.png';   // üÜï New 50%
              if (lvl > 75) img = '/local/battery/battery_75.png';
              if (lvl > 90) img = '/local/battery/battery_90.png';   // üÜï New 90%
              if (lvl >= 100) img = '/local/battery/battery_100.png';

              return `<img src="${img}" style="height: 200px;" />`;  // üñºÔ∏è Render image
            ]]]

        # ---------------------------------------
        # üé® Styling for layout, text, and image
        # ---------------------------------------
        styles:
          card:
            - height: 160px
            - background-color: "#2c3e50"
            - position: relative
            - padding: 0
            - border-radius: 20px
            - box-shadow: 0 4px 10px rgba(0, 0, 0, 0.6)
            - color: white
          name:
            - position: absolute
            - top: 5%
            - left: 50%
            - transform: translateX(-50%)
            - font-size: 20px
            - font-weight: 400
            - text-shadow: 1px 1px 2px black
          state:
            - position: absolute
            - bottom: 10%
            - left: 50%
            - transform: translateX(-50%)
            - font-size: 18px
            - font-weight: 400
            - text-shadow: 1px 1px 2px black
          custom_fields:
            battery_img:
              - position: absolute
              - top: 65%
              - left: 50%
              - transform: translate(-50%, -50%)
